<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="utf-8">
		<style type="text/css">
			ins {
				background-color: #c6ffc6;
				text-decoration: none;
			}

			del {
				background-color: #ffc6c6;
			}
		  </style>
	</head>
	<body>
		<textarea class="form-control vresize changed" rows="10" style="width: 100%;"></textarea>
		<div class="form-group">
			<button type="button" id="compareButton" data-loading-text="처리중..." class="btn btn-primary" autocomplete="off">정답 보기</button>
		</div>
		<div class="form-group" id="result">
			<label>정답</label>
			<pre id=answer></pre>
			<button type="button" id="diffButton" data-loading-text="처리중..." class="btn btn-primary" autocomplete="off">채점 하기</button>
			<div>
				<div class="diff well well-sm" style="overflow:scroll;line-height:100%;"></div>
			</div>
		</div>
		<script src="/memorization-test/js/include.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="/memorization-test/js/common.js"></script>

		<script src="/memorization-test/js/diff_match_patch.js"></script>
		<script src="/memorization-test/js/jquery.pretty-text-diff.min.js"></script>
		<script src="/memorization-test/js/jquery.picadiff-0.7.1.min.js"></script>
		<script>
			$("#result").hide();
			$('#compareButton').click(function(){
				var $button = $(this).button('loading');
				$("#result").show();
				$("#answer").load("/memorization-test/answer.txt");
				$button.button('reset');
			});
			$('#diffButton').click(function(){
				console.log("diffButton click");
				var $button = $(this).button('loading');
				$("#result div").prettyTextDiff({
					originalContent: $("#answer").text().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/ /gi, "&nbsp;"),
					changedContent: $(".changed").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/ /gi, "&nbsp;"),
					diffContainer: ".diff"
				});
				$button.button('reset');
			});
		</script>
	</body>
</html>
