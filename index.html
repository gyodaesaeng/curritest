<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="utf-8">
	</head>
	<body>
		<main>
			<div class="container">
				<div class="row">
					<div class="col-md-10 col-md-offset-1">
						<div id="title">
							<h1><b>코드 비교</b></h1>
							온라인 상에서 문자열을 비교하여 차이점을 보여주는 사이트입니다.<br>
							비교 결과를 한페이지 혹은 두페이지 분할로 보실 수 있습니다.
						</div>
					</div>
				</div>

				<hr/>

				<form class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-1 control-label">출력</label>
						<div class="col-sm-10">
							<div class="btn-group" id="codeType" data-toggle="buttons">
								<label class="btn btn-primary active">
									<input type="radio" name="codeType" autocomplete="off" value="one" checked> 한페이지
								</label>
								<label class="btn btn-primary">
									<input type="radio" name="codeType" autocomplete="off" value="two"> 두페이지
								</label>
							</div>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-1 control-label">원본</label>
						<div class="col-sm-5">
							<textarea class="form-control vresize original" rows="10"></textarea>
						</div>
						<div class="col-sm-5">
							<textarea class="form-control vresize changed" rows="10"></textarea>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-offset-1 col-sm-10">
							<button type="button" id="convertBtn" data-loading-text="처리중..." class="btn btn-primary" autocomplete="off">변환</button>
						</div>
					</div>
					<div class="form-group" id="oneResult">
						<label class="col-sm-1 control-label">비교</label>
						<div class="col-sm-10">
							<div class="diff well well-sm" style="overflow:scroll;"></div>
						</div>
					</div>
					<div class="form-group" id="twoResult" style="display:none;">
						<label class="col-sm-1 control-label">비교</label>
						<div class="col-sm-10">
							<div class="picadiff">
								<div class="picadiff-content">
										<div class="left well well-sm"></div>
										<div class="right well well-sm"></div>
								</div>
							</div>
						</div>
					</div>
				</form>

				<div class="row">
					<div class="col-md-10 col-md-offset-1">
						<hr/>
						<hr/>
					</div>
				</div>
			</div>
		</main>

		<footer w3-include-html="/includes/footer.html"></footer>

		<script src="/memorization-test/js/include.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="/memorization-test/js/common.js"></script>

		<script src="/memorization-test/js/diff_match_patch.js"></script>
		<script src="/memorization-test/js/jquery.pretty-text-diff.min.js"></script>
		<script src="/memorization-test/js/jquery.picadiff-0.7.1.min.js"></script>
		<script>
			$(document).ready(function(){

				// 변환 버튼
				$('#convertBtn').on('click', function(){
					var $btn = $(this).button('loading');
					$("#oneResult div").prettyTextDiff({
						originalContent: $(".original").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/ /gi, "&nbsp;"),
						changedContent: $(".changed").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/ /gi, "&nbsp;"),
						diffContainer: ".diff"
					});
					window.console.log($(".original").val());
					$('.picadiff').picadiff({
							leftContent: $(".original").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/\n/gi, "<br> "),
							rightContent: $(".changed").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/\n/gi, "<br> "),
							lineLength: 5000,
							timeout: 1
						});
					$btn.button('reset');
				});

				// 문서종류 라디오 버튼
				$("#codeType :input").change(function() {
					var codeType = $(":radio[name='codeType']:checked").val();
					if(codeType == "one"){
						$("#oneResult").show();
						$("#twoResult").hide();
					}else if (codeType == "two"){
						$("#oneResult").hide();
						$("#twoResult").show();
					}
				});

				$(".left").scroll(function(){
					$(".right").scrollLeft($(this).scrollLeft());
				});

				$(".right").scroll(function(){
					$(".left").scrollLeft($(this).scrollLeft());
				});

			});
		</script>
	</body>
</html>
