<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="utf-8">
		<style type="text/css">
			form ins {
				background-color: #c6ffc6;
				text-decoration: none;
			}

			del {
				background-color: #ffc6c6;
			}
		  </style>
	</head>
	<body>
		<main>
			<div class="container">
				<form class="form-horizontal">
					<div class="form-group">
						<label>원본</label>
						<div class="col-sm-5">
							<textarea class="form-control vresize original" rows="10"></textarea>
						</div>
						<div class="col-sm-5">
							<textarea class="form-control vresize changed" rows="10"></textarea>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-offset-1 col-sm-10">
							<button type="button" id="convertBtn" data-loading-text="처리중..." class="btn btn-primary" autocomplete="off">변환</button>
						</div>
					</div>
					<div class="form-group" id="oneResult">
						<label class="col-sm-1 control-label">비교</label>
						<div class="col-sm-10">
							<div class="diff well well-sm" style="overflow:scroll;"></div>
						</div>
					</div>
					<div class="form-group" id="twoResult" style="display:none;">
						<label class="col-sm-1 control-label">비교</label>
						<div class="col-sm-10">
							<div class="picadiff">
								<div class="picadiff-content">
										<div class="left well well-sm"></div>
										<div class="right well well-sm"></div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</main>
		<script src="/memorization-test/js/include.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
		<script src="/memorization-test/js/common.js"></script>

		<script src="/memorization-test/js/diff_match_patch.js"></script>
		<script src="/memorization-test/js/jquery.pretty-text-diff.min.js"></script>
		<script src="/memorization-test/js/jquery.picadiff-0.7.1.min.js"></script>
		<script>
			$(document).ready(function(){
				$('#convertBtn').on('click', function(){
					var $btn = $(this).button('loading');
					$("#oneResult div").prettyTextDiff({
						originalContent: $(".original").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/ /gi, "&nbsp;"),
						changedContent: $(".changed").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/ /gi, "&nbsp;"),
						diffContainer: ".diff"
					});
					window.console.log($(".original").val());
					$('.picadiff').picadiff({
							leftContent: $(".original").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/\n/gi, "<br> "),
							rightContent: $(".changed").val().replace(/</gi, "&lt;").replace(/>/gi, "&gt;").replace(/\n/gi, "<br> "),
							lineLength: 5000,
							timeout: 1
						});
					$btn.button('reset');
				});
			});
		</script>
	</body>
</html>
